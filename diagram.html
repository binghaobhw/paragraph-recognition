<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title>diagram</title>
    <script type='text/javascript'
            src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
    <script type='text/javascript'
            src="http://code.highcharts.com/highcharts.js"></script>
</head>
<body>
<div id="container" style="min-width: 310px; height: 400px; margin: 0 auto"></div>
<div id="container1" style="min-width: 310px; height: 400px; margin: 0 auto"></div>
<div id="container2" style="min-width: 310px; height: 400px; margin: 0 auto"> </div>
<div id="container3" style="min-width: 310px; height: 400px; margin: 0 auto"></div>
<script type="text/javascript">
    var wePath = 'data/500/word-embedding/window-size-3/3-method-comparison/3-method-comparison.json';
    $.getJSON(wePath, function(data) {
        var categories = ['new', 'follow'];
        var series = [];
        for (var methodName in data) {
            var seriesData = {name: methodName};
            seriesData.data = [data[methodName]['average']['new']['F1'],
                               data[methodName]['average']['follow']['F1']
            ];
            series.push(seriesData);
        }
        $(function () {
            $('#container').highcharts({
                chart: {
                    type: 'column'
                },
                title: {
                    text: wePath
                },
                xAxis: {
                    categories: categories
                },
                yAxis: {
                    endOnTick: false,
                    min: 0,
                    title: {
                        text: 'rate'
                    }
                },
                tooltip: {
                    headerFormat: '<span style="font-size:10px">{point.key}</span><table>',
                    pointFormat: '<tr><td style="color:{series.color};padding:0">{series.name}: </td>' +
                        '<td style="padding:0"><b>{point.y:.3f}</b></td></tr>',
                    footerFormat: '</table>',
                    shared: true,
                    useHTML: true
                },
                plotOptions: {
                    column: {
                        pointPadding: 0.2,
                        borderWidth: 0,
                        dataLabels: {
                            overflow: 'none',
                            crop: false,
                            enabled: true,
                            format: '{y:.3f}'
                        }
                    }
                },
                series: series
            });
        });
    });
    var path1 = 'data/500/word-embedding/window-size-3/analyze-feature/analyze-feature.json';
    $.getJSON(path1, function(data) {
        var categories = [];
        var originNew = 0;
        var originFollow = 0;
        var dataNew = {name: 'new', data: []};
        var dataFollow = {name: 'follow', data: []};
        for (var featureName in data) {
            dataNew.data.push([data[featureName]['average']['new']['F1']]);
            dataFollow.data.push([data[featureName]['average']['follow']['F1']]);
            if (featureName == 'origin') {
                originNew = dataNew.data.pop();
                originFollow = dataFollow.data.pop();
                continue;
            }
            categories.push(featureName)
        }
        var series = [dataNew, dataFollow];
        $(function () {
            $('#container1').highcharts({
                chart: {
                    type: 'column'
                },
                title: {
                    text: path1
                },
                xAxis: {
                    categories: categories
                },
                yAxis: {
                    min: 0.5,
                    title: {
                        text: 'rate'
                    },
                    endOnTick: false,
                    plotLines: [
                        {
                            color: '#7FB5EC',
                            width: 2,
                            value: originNew,
                            zIndex: 5,
                            dashStyle : 'shortdash',
                            label: {
                                text: 'new',
                                textAlign: 'right',
                                x: 25,
                                y: -2
                            }
                        },
                        {
                            color: '#434348',
                            width: 2,
                            value: originFollow,
                            zIndex: 5,
                            dashStyle : 'shortdash',
                            label: {
                                text: 'follow',
                                textAlign: 'right',
                                x: 25,
                                y: -2
                            }
                        }]
                },
                tooltip: {
                    headerFormat: '<span style="font-size:10px">{point.key}</span><table>',
                    pointFormat: '<tr><td style="color:{series.color};padding:0">{series.name}: </td>' +
                        '<td style="padding:0"><b>{point.y:.3f}</b></td></tr>',
                    footerFormat: '</table>',
                    shared: true,
                    useHTML: true
                },
                plotOptions: {
                    column: {
                        pointPadding: 0.2,
                        borderWidth: 0,
                        dataLabels: {
                            crop: false,
                            overflow: 'none',
                            enabled: true,
                            format: '{y:.3f}'
                        }
                    }
                },
                series: series
            });
        });
    });
    var path2 = 'data/500/word-embedding/window-size/window-size.json';
    $.getJSON(path2, function(data) {
        var categories = ['new', 'follow'];
        var series = [];
        for (var windowSize in data) {
            seriesData = {name: windowSize};
            seriesData.data = [data[windowSize]['average']['new']['F1'],
                               data[windowSize]['average']['follow']['F1']
            ];
            series.push(seriesData);
        }
        $(function () {
            $('#container2').highcharts({
                chart: {
                    type: 'column'
                },
                title: {
                    text: path2
                },
                xAxis: {
                    categories: categories
                },
                yAxis: {
                    endOnTick: false,
                    min: 0.5,
                    title: {
                        text: 'rate'
                    }
                },
                tooltip: {
                    headerFormat: '<span style="font-size:10px">{point.key}</span><table>',
                    pointFormat: '<tr><td style="color:{series.color};padding:0">{series.name}: </td>' +
                        '<td style="padding:0"><b>{point.y:.3f}</b></td></tr>',
                    footerFormat: '</table>',
                    shared: true,
                    useHTML: true
                },
                plotOptions: {
                    column: {
                        pointPadding: 0.2,
                        borderWidth: 0,
                        dataLabels: {
                            overflow: 'none',
                            crop: false,
                            enabled: true,
                            format: '{y:.3f}'
                        }
                    }
                },
                series: series
            });
        });
    });
    var wePath3 = 'data/500/word-embedding/window-size-3/3-method-comparison/3-method-comparison.json';
    var hnPath3 = 'data/500/hownet/window-size-3/3-method-comparison/3-method-comparison.json';
    var categories = [];
    var series = [];
    var we = {name: 'word-embedding', data: []};
    $.getJSON(wePath3, function(data) {
        for (var methodName in data) {
            categories.push(methodName + '-new');
            we.data.push(data[methodName]['average']['new']['F1']);
            categories.push(methodName + '-follow');
            we.data.push(data[methodName]['average']['follow']['F1']);
        }
    });
    series.push(we);
    var hn = {name: 'hownet', data: []};
    $.getJSON(hnPath3, function(data) {
        for (var methodName in data) {
            hn.data.push(data[methodName]['average']['new']['F1']);
            hn.data.push(data[methodName]['average']['follow']['F1']);
        }
    });
    series.push(hn);
    $(function () {
        $('#container3').highcharts({
            chart: {
                type: 'column'
            },
            title: {
                text: wePath
            },
            xAxis: {
                categories: categories
            },
            yAxis: {
                endOnTick: false,
                min: 0,
                title: {
                    text: 'rate'
                }
            },
            tooltip: {
                headerFormat: '<span style="font-size:10px">{point.key}</span><table>',
                pointFormat: '<tr><td style="color:{series.color};padding:0">{series.name}: </td>' +
                        '<td style="padding:0"><b>{point.y:.3f}</b></td></tr>',
                footerFormat: '</table>',
                shared: true,
                useHTML: true
            },
            plotOptions: {
                column: {
                    pointPadding: 0.2,
                    borderWidth: 0,
                    dataLabels: {
                        overflow: 'none',
                        crop: false,
                        enabled: true,
                        format: '{y:.3f}'
                    }
                }
            },
            series: series
        });
    });

</script>
<script type='text/javascript'>
    $(document).ready(function() {
        var followOptions = {
            title: {
                text: 'Follow'
            },
            chart: {
                type: 'line'
            },
            xAxis: {
                title: {
                    text: 'threshold'
                }
            },
            yAxis: {
                title: {
                    text: 'rate'
                }
            },
            series: []
        };
        var newOptions = {
            title: {
                text: 'New'
            },
            chart: {
                type: 'line'
            },
            xAxis: {
                title: {
                    text: 'threshold'
                }
            },
            yAxis: {
                title: {
                    text: 'rate'
                }
            },
            series: []
        };
        $('#file').live('change', function() {
            var files = $('#file').prop("files");
            $.map(files, function(val) {
                var path = 'file:///' + $('#path').val() + '/' + val.name;
                var divFollowId = val.name + '.f';
                var divNewId = val.name + '.n';
                var divHeader = $('<div>' + path + '</div>');
                var divFollow = $('<div id="' + divFollowId + '", sty' + 'le="width:50%; float: left">');
                var divNew= $('<div id="' + divNewId + '", style="width:50%; float: left">');
                $("#diagrams").append(divHeader, divFollow, divNew);

                $.getJSON(path, function(data) {
                    var pFollow = [];
                    var rFollow = [];
                    var f1Follow = [];
                    var pNew = [];
                    var rNew = [];
                    var f1New = [];
                    for(var i = 0; i < data.length; i++) {
                        pFollow.push([data[i].threshold, data[i].result.F.P]);
                        rFollow.push([data[i].threshold, data[i].result.F.R]);
                        f1Follow.push([data[i].threshold, data[i].result.F.F1]);
                        pNew.push([data[i].threshold, data[i].result.N.P]);
                        rNew.push([data[i].threshold, data[i].result.N.R]);
                        f1New.push([data[i].threshold, data[i].result.N.F1]);
                    }
                    followOptions.series = [];
                    followOptions.series.push({name: 'P', data: pFollow},
                            {name: 'R', data: rFollow}, {name: 'F1', data: f1Follow});
                    newOptions.series = [];
                    newOptions.series.push({name: 'P', data: pNew},
                            {name: 'R', data: rNew}, {name: 'F1', data: f1New});
                    divFollow.highcharts(followOptions);
                    divNew.highcharts(newOptions);
                });
            });
        });
    });
</script>

</body>
</html>